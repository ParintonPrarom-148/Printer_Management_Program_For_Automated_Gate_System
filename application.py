# ‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡πÇ‡∏°‡∏î‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô
from dotenv import load_dotenv, set_key, dotenv_values  # ‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏™‡∏†‡∏≤‡∏û‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏°
from PyQt6.QtWidgets import QWidget, QToolButton, QMenu, QLineEdit, QPushButton, QApplication, QFileDialog  # ‡∏™‡πà‡∏ß‡∏ô‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö UI ‡∏Ç‡∏≠‡∏á PyQt6
from PyQt6 import uic  # ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÇ‡∏´‡∏•‡∏î UI ‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏î‡πâ‡∏ß‡∏¢ Qt Designer
from PyQt6.QtCore import QProcess  # ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏±‡∏ö‡∏Å‡∏£‡∏∞‡∏ö‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡∏†‡∏≤‡∏¢‡∏ô‡∏≠‡∏Å (‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏ô‡∏µ‡πâ)
import json  # ‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏≠‡πà‡∏≤‡∏ô/‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÑ‡∏ü‡∏•‡πå JSON
import sys  # ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏£‡∏∞‡∏ö‡∏ö ‡πÄ‡∏ä‡πà‡∏ô ‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏•‡∏î‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡πÉ‡∏´‡∏°‡πà
import os  # ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Å‡∏±‡∏ö‡πÑ‡∏ü‡∏•‡πå‡πÅ‡∏•‡∏∞‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå
# ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå .ui ‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ __file__ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å‡πÑ‡∏ü‡∏•‡πå executable
ui_file = os.path.join(os.path.dirname(__file__), 'Designer', 'application.ui')
env_file = ".env"  # ‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå‡∏™‡∏†‡∏≤‡∏û‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏°

class Ui_Application(QWidget):  # ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ñ‡∏•‡∏≤‡∏™ UI ‡∏´‡∏•‡∏±‡∏Å
    def __init__(self):
        super().__init__()  # ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô QWidget (‡∏Ñ‡∏•‡∏≤‡∏™‡πÅ‡∏°‡πà)

        uic.loadUi(ui_file, self)
        load_dotenv()  # ‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå .env ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏™‡∏†‡∏≤‡∏û‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏°
        self.load_config()  # ‡πÇ‡∏´‡∏•‡∏î‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏à‡∏≤‡∏Å‡∏Ñ‡∏≠‡∏ô‡∏ü‡∏¥‡∏Å

        # ‡∏•‡∏¥‡∏á‡∏Å‡πå QToolButton ‡∏ó‡∏µ‡πà‡∏ä‡∏∑‡πà‡∏≠ 'btnmenu' ‡πÅ‡∏•‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏°‡∏ô‡∏π‡∏î‡∏£‡∏≠‡∏õ‡∏î‡∏≤‡∏ß‡∏ô‡πå
        self.btnmenu = self.findChild(QToolButton, 'btnmenu')
        self.create_menu()  # ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏ô‡πÄ‡∏°‡∏ô‡∏π
        set_key(env_file, "USERNAME",("Pluem"))
        set_key(env_file, "PASSWORD",("1234"))
        # ‡∏•‡∏¥‡∏á‡∏Å‡πå QLineEdit ‡πÅ‡∏•‡∏∞ QPushButton ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÇ‡∏ï‡πâ‡∏ï‡∏≠‡∏ö‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
        self.setup_ui_elements()

    def create_menu(self):
        # ‡∏™‡∏£‡πâ‡∏≤‡∏á QMenu ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÉ‡∏ô‡πÄ‡∏°‡∏ô‡∏π‡∏î‡∏£‡∏≠‡∏õ‡∏î‡∏≤‡∏ß‡∏ô‡πå
        menu = QMenu(self)
        menu.addAction('Monitoring', self.on_monitoring_selected)  # ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö
        menu.addAction('Configuration Setup', self.on_configuration_selected)  # ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏≠‡∏ô‡∏ü‡∏¥‡∏Å
        menu.addAction('Application Setup', self.on_application_selected)  # ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÅ‡∏≠‡∏õ‡∏û‡∏•‡∏¥‡πÄ‡∏Ñ‡∏ä‡∏±‡∏ô
        self.btnmenu.setMenu(menu)  # ‡πÅ‡∏ô‡∏ö‡πÄ‡∏°‡∏ô‡∏π‡πÄ‡∏Ç‡πâ‡∏≤‡∏Å‡∏±‡∏ö‡∏õ‡∏∏‡πà‡∏°
        self.btnmenu.setPopupMode(QToolButton.ToolButtonPopupMode.InstantPopup)  # ‡πÇ‡∏´‡∏°‡∏î‡∏õ‡πä‡∏≠‡∏õ‡∏≠‡∏±‡∏û‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏î‡∏£‡∏≠‡∏õ‡∏î‡∏≤‡∏ß‡∏ô‡πå

    def setup_ui_elements(self):
        # ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô QLineEdit ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
        self.textLocation = self.findChild(QLineEdit, 'textLocation')
        self.textGateLane = self.findChild(QLineEdit, 'textGateLane')
        self.textTerminal = self.findChild(QLineEdit, 'textTerminal')
        self.textKioskIP = self.findChild(QLineEdit, 'textKioskIP')
        self.textSetTimeSendLog = self.findChild(QLineEdit, 'textSetTimeSendLog')
        self.textKioskLogFileLocation = self.findChild(QLineEdit, 'textKioskLogFileLocation')
        self.textURLWebService = self.findChild(QLineEdit, 'textURLWebService')
        self.textPrinterLogFileName = self.findChild(QLineEdit, 'textPrinterLogFileName')
        self.textPrinterLogFileLocation = self.findChild(QLineEdit, 'textPrinterLogFileLocation')
        self.textRemark = self.findChild(QLineEdit, 'textRemark')

        # ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏õ‡∏∏‡πà‡∏°‡πÅ‡∏•‡∏∞‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á
        self.btnSelectPrinterLogfileLocation = self.findChild(QPushButton, 'btnSelectPrinterLogfileLocation')
        self.btnClearEnv = self.findChild(QPushButton, 'btnClearEnv')
        self.btnSaveApplicationSetup = self.findChild(QPushButton, 'btnSaveApplicationSetup')

        # ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏õ‡∏∏‡πà‡∏°‡∏Å‡∏±‡∏ö‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á
        self.btnSelectPrinterLogfileLocation.clicked.connect(self.show_save_dialog)
        self.btnSaveApplicationSetup.clicked.connect(self.save_data_to_json)

    def load_config(self):
        try:
            # ‡πÇ‡∏´‡∏•‡∏î‡∏Ñ‡∏≠‡∏ô‡∏ü‡∏¥‡∏Å‡∏à‡∏≤‡∏Å‡πÑ‡∏ü‡∏•‡πå JSON ‡∏ï‡∏≤‡∏°‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏à‡∏≤‡∏Å .env
            json_file_path = os.getenv("KIOSK_LOGFILE_LOCATION")

            if not json_file_path:
                print("‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ñ‡πà‡∏≤‡∏Ç‡∏≠‡∏á KIOSK_LOGFILE_LOCATION ‡πÉ‡∏ô‡πÑ‡∏ü‡∏•‡πå .env")
                return

            # ‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏ü‡∏•‡πå JSON ‡πÅ‡∏•‡∏∞‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
            with open(json_file_path, 'r') as file:
                data = json.load(file)

            app_setup = data.get("ApplicationSetup", [{}])[0]

            # ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡πÇ‡∏´‡∏•‡∏î‡∏°‡∏≤‡πÉ‡∏™‡πà‡πÉ‡∏ô QLineEdit
            self.textLocation.setText(app_setup.get("Location", ""))
            self.textGateLane.setText(app_setup.get("GateLane", ""))
            self.textTerminal.setText(app_setup.get("Terminal", ""))
            self.textKioskIP.setText(app_setup.get("KioskIP", ""))
            self.textSetTimeSendLog.setText(app_setup.get("SetTimeSendLog", ""))
            self.textKioskLogFileLocation.setText(app_setup.get("KioskLocationLogFile", ""))
            self.textURLWebService.setText(app_setup.get("URLWebService", ""))
            self.textPrinterLogFileName.setText(app_setup.get("PrinterLogFileName", ""))
            self.textPrinterLogFileLocation.setText(app_setup.get("PrinterLogFileLocation", ""))
            self.textRemark.setText(app_setup.get("Remark", ""))

            # ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö PrinterLogFileLocation ‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡πÅ‡∏•‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ñ‡πâ‡∏≤‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô
            printer_log_file_location = app_setup.get("PRINTER_LOGFILE_LOCATION", "")
            if printer_log_file_location:
                self.check_and_create_folder(printer_log_file_location)

        except Exception as e:
            print(f"‚ùå Error loading config: {e}")

    def check_and_create_folder(self, folder_path):
        if not os.path.exists(folder_path):
            os.makedirs(folder_path)  # ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ
            print(f"‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏ñ‡∏π‡∏Å‡∏™‡∏£‡πâ‡∏≤‡∏á: {folder_path}")
        else:
            print(f"‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß: {folder_path}")

    def show_save_dialog(self):
        # ‡πÄ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÅ‡∏•‡∏∞‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÉ‡∏ô QLineEdit
        folder_path = QFileDialog.getExistingDirectory(self, "Select Folder")
        if folder_path:
            printer_name = self.textPrinterLogFileName.text()
            full_path_logfile = os.path.join(folder_path, printer_name)
            full_path_config = os.path.join(full_path_logfile, "config.json")
            self.textPrinterLogFileLocation.setText(full_path_logfile)
            self.textKioskLogFileLocation.setText(full_path_config)

    def save_data_to_json(self):
        try:
            # ‡∏£‡∏ß‡∏ö‡∏£‡∏ß‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å QLineEdit
            location = self.textLocation.text()
            gate_lane = self.textGateLane.text()
            terminal = self.textTerminal.text()
            kiosk_ip = self.textKioskIP.text()
            set_time_send_log = self.textSetTimeSendLog.text()
            kiosk_location_log_file = self.textKioskLogFileLocation.text()
            url_web_service = self.textURLWebService.text()
            printer_log_file_name = self.textPrinterLogFileName.text()
            printer_log_file_location = self.textPrinterLogFileLocation.text()
            remark = self.textRemark.text()

            # ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÉ‡∏´‡πâ‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏ß‡πà‡∏≤‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö printer_log_location ‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà
            self.ensure_printer_log_folder(printer_log_file_location)

            # ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡πÑ‡∏î‡πâ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ path ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö config.json ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
            if not kiosk_location_log_file:
                print("‚ùå ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏£‡∏∞‡∏ö‡∏∏ path ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÑ‡∏ü‡∏•‡πå config.json ‡πÉ‡∏ô .env")
                return

            json_file_path = kiosk_location_log_file

            # ‡∏´‡∏≤‡∏Å‡πÑ‡∏ü‡∏•‡πå JSON ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà ‡πÉ‡∏´‡πâ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà
            if not os.path.exists(json_file_path):
                print(f"‚ö†Ô∏è ‡πÑ‡∏°‡πà‡∏û‡∏ö‡πÑ‡∏ü‡∏•‡πå {json_file_path} ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏´‡∏°‡πà...")
                self.create_initial_json(json_file_path)

            # ‡∏≠‡πà‡∏≤‡∏ô‡πÑ‡∏ü‡∏•‡πå JSON ‡πÅ‡∏•‡∏∞‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
            with open(json_file_path, 'r') as file:
                data = json.load(file)

            app_setup = data.get("ApplicationSetup", [{}])[0]
            app_setup.update({
                "Location": location,
                "GateLane": gate_lane,
                "Terminal": terminal,
                "KioskIP": kiosk_ip,
                "SetTimeSendLog": set_time_send_log,
                "KioskLocationLogFile": kiosk_location_log_file,
                "URLWebService": url_web_service,
                "PrinterLogFileName": printer_log_file_name,
                "PrinterLogFileLocation": printer_log_file_location,
                "Remark": remark
            })

            # ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡πÑ‡∏ü‡∏•‡πå JSON
            with open(json_file_path, 'w') as file:
                json.dump(data, file, indent=4)

            print("‚úÖ Data saved successfully.")
            self.update_env_variables(location, printer_log_file_location, kiosk_location_log_file, url_web_service, set_time_send_log,kiosk_ip)

        except Exception as e:
            print(f"‚ùå Error saving data: {e}")

    def ensure_printer_log_folder(self, printer_log_location):
        if printer_log_location and not os.path.exists(printer_log_location):
            os.makedirs(printer_log_location, exist_ok=True)
            print(f"üìÇ ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå printer_log: {printer_log_location}")

    def create_initial_json(self, json_file_path):
        # ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå JSON ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏õ‡∏£‡∏¥‡πâ‡∏ô‡πÄ‡∏ï‡∏≠‡∏£‡πå‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
        data = {
            "ApplicationSetup": [{}],
            "PrinterSetup1": [
                {"PrinterModel": "", "Setting": "Primary", "LocationFilePrinter": ""}
            ],
            "PrinterSetup2": [
                {"PrinterModel": "", "Setting": "Secondary", "LocationFilePrinter": ""}
            ]
        }

        with open(json_file_path, 'w') as file:
            json.dump(data, file, indent=4)

    def update_env_variables(self, location, printer_log_file_location, kiosk_location_log_file, url_web_service, set_time_send_log,kiosk_ip):
        load_dotenv(override=True)
        # ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡πÑ‡∏ü‡∏•‡πå .env ‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÉ‡∏´‡∏°‡πà
        set_key(env_file, "LOCATION", location)
        set_key(env_file, "PRINTER_LOGFILE_LOCATION", os.path.normpath(printer_log_file_location))
        set_key(env_file, "KIOSK_LOGFILE_LOCATION", os.path.normpath(kiosk_location_log_file))
        set_key(env_file, "SERVER_URL", url_web_service)
        set_key(env_file, "KIOSK_URL", kiosk_ip)
        set_key(env_file, "POST_PRINTER_STATUS_SECOND_INTERVAL", set_time_send_log)
        QProcess.startDetached(sys.executable, sys.argv)  # ‡πÄ‡∏õ‡∏¥‡∏î‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡πÉ‡∏´‡∏°‡πà
        sys.exit(0)  # ‡∏õ‡∏¥‡∏î‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡πÄ‡∏Å‡πà‡∏≤

    def on_monitoring_selected(self):
        # ‡∏™‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö
        self.close()

    def on_configuration_selected(self):
        # ‡∏™‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏≠‡∏ô‡∏ü‡∏¥‡∏Å
        self.close()
        from configuration import Ui_Configuration
        self.new_window = Ui_Configuration()
        self.new_window.show()

    def on_application_selected(self):
        # ‡∏™‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÅ‡∏≠‡∏õ‡∏û‡∏•‡∏¥‡πÄ‡∏Ñ‡∏ä‡∏±‡∏ô
        self.close()  # ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô
        from application import Ui_Application  # ‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤ UI ‡∏Ç‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÅ‡∏≠‡∏õ‡∏û‡∏•‡∏¥‡πÄ‡∏Ñ‡∏ä‡∏±‡∏ô
        self.new_window = Ui_Application()  # ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏ô‡∏™‡πÅ‡∏ï‡∏ô‡∏ã‡πå‡∏Ç‡∏≠‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà
        self.new_window.show()  # ‡πÅ‡∏™‡∏î‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà
